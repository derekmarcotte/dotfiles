#!/bin/sh

usage() {
	echo "$0 [base|pathogen|vim-sensible|vim-go|vim-sync|colors]"
	exit 1
}

pathogen_install() {
	if [ ! -d bundle ]; then
		echo "Pathogen not found, installing?"
		$0 pathogen
	fi

	cd bundle
}

REPO=""
repo() {
	# poor-man's associative array
	case $1 in
	# language-agnostic
	vim-sensible)     REPO="git://github.com/tpope/vim-sensible.git" ;;
	vim-sync)         REPO="https://github.com/eshion/vim-sync" ;;
	# language-specific
	vim-go)           REPO="https://github.com/fatih/vim-go.git" ;;
	vim-php-cs-fixer) REPO="https://github.com/stephpy/vim-php-cs-fixer" ;;
	*) return 1 ;;
	esac

	return 0
}

case $1 in
pathogen)
	# https://github.com/tpope/vim-pathogen
	mkdir autoload bundle 
	curl -LSso autoload/pathogen.vim https://tpo.pe/pathogen.vim
	;;
vim-*)
	pathogen_install
	if [ -d "$1" ]; then
		cd "$1"
		git pull
	else
		repo "$1"
		if [ "$REPO" ]; then
			git clone "$REPO"
		else
			echo "Could not find a repo matching $1"
			usage
		fi
	fi
	;;
colors)
	mkdir colors
	cd colors

	# https://github.com/tomasr/molokai
	curl -OJ https://raw.githubusercontent.com/tomasr/molokai/master/colors/molokai.vim

	# https://github.com/noahfrederick/vim-noctu
	curl -OJ https://raw.githubusercontent.com/noahfrederick/vim-noctu/master/colors/noctu.vim
	;;
base)
	$0 pathogen
	$0 colors
	$0 vim-sensible
	;;
wipe)
	rm -rf autoload
	rm -rf bundle
	rm -rf colors
	;;
*)
	usage
	;;
esac
